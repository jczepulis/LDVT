<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guía de Fabricación de un LVDT para Dendrómetro</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      line-height: 1.6;
      margin: 0 1rem 3rem 1rem;
      color: #222;
    }
    h1, h2, h3 {
      color: #0b468a;
    }
    nav {
      background: #f0f4ff;
      border-left: 4px solid #0b468a;
      padding: 0.8rem 1rem;
      margin-bottom: 1.5rem;
    }
    nav ul {
      list-style: none;
      padding-left: 0;
    }
    nav li {
      margin: 0.3rem 0;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    table th, table td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: left;
    }
    table th {
      background: #e9eefc;
    }
    code, pre {
      background: #fafafa;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    pre {
      padding: 0.8rem;
      overflow-x: auto;
    }
    .note {
      background: #fffbe5;
      border-left: 4px solid #ffc107;
      padding: 0.8rem 1rem;
      margin: 1rem 0;
    }
  </style>
</head>
<body>
  <h1>Guía de Fabricación de un <abbr title="Linear Variable Differential Transformer">LVDT</abbr> para Dendrómetro</h1>

  <p>Esta guía práctica resume todos los pasos discutidos en las consultas previas para diseñar, construir y calibrar un LVDT de ±5&nbsp;mm de recorrido, adecuado para medir la expansión y contracción diaria de tallos o ramas en un dendrómetro.</p>

  <!-- Índice -->
  <nav>
    <strong>Contenido</strong>
    <ul>
      <li><a href="#principio">Principio de funcionamiento</a></li>
      <li><a href="#parametros">Parámetros de diseño</a></li>
      <li><a href="#bobinas">Diseño y bobinado</a></li>
      <li><a href="#mecanico">Montaje mecánico</a></li>
      <li><a href="#electronica">Electrónica de acondicionamiento</a></li>
      <li><a href="#vrms">Generar 5&nbsp;VRMS</a></li>
      <li><a href="#calibracion">Calibración</a></li>
      <li><a href="#consejos">Consejos prácticos</a></li>
      <li><a href="#referencias">Recursos de referencia</a></li>
    </ul>
  </nav>

  <!-- Principio -->
  <section id="principio">
    <h2>1. Principio de funcionamiento</h2>
    <p>Un LVDT es un transformador diferencial lineal compuesto por tres bobinas coaxiales: una primaria (<em>P</em>) y dos secundarias (<em>S1</em> y <em>S2</em>), conectadas en oposición serie. Un núcleo ferromagnético móvil altera el acoplamiento entre <em>P</em> y las secundarias. La salida diferencial <code>V<sub>out</sub> = V<sub>S1</sub> - V<sub>S2</sub></code> varía casi linealmente con el desplazamiento&nbsp;del núcleo alrededor del punto nulo.</p>
  </section>

  <!-- Parámetros -->
  <section id="parametros">
    <h2>2. Parámetros de diseño sugeridos</h2>
    <table>
      <thead>
        <tr><th>Parámetro</th><th>Valor</th><th>Comentario</th></tr>
      </thead>
      <tbody>
        <tr><td>Carrera útil</td><td>±5&nbsp;mm (10&nbsp;mm total)</td><td>Suficiente para dendrómetro portátil</td></tr>
        <tr><td>Sensibilidad</td><td>≈ 2&nbsp;mV/V/mm</td><td>Con 3 VRMS&nbsp;→ ≈ 60 mV<sub>pp</sub> a escala completa</td></tr>
        <tr><td>Frecuencia de excitación</td><td>5 kHz</td><td>Rechazo a 50/60 Hz y tamaño de bobina moderado</td></tr>
        <tr><td>Núcleo</td><td>Permalloy Ø 4 mm × 30 mm</td><td>Alta permeabilidad, baja histéresis</td></tr>
        <tr><td>Bobina (carrete)</td><td>Fibra de vidrio/PLA Ø 6 mm int., 8 mm ext., 22 mm long.</td><td>Secciones 6 + 10 + 6 mm con pestañas 0,5 mm</td></tr>
        <tr><td>Alambre</td><td>AWG 36 (Ø 0,127 mm)</td><td>≈ 45 Ω por bobina</td></tr>
        <tr><td>Espiras</td><td>P: 600 — S1/S2: 450</td><td>Devanar secundarias bifilarmente</td></tr>
      </tbody>
    </table>
  </section>

  <!-- Bobinas -->
  <section id="bobinas">
    <h2>3. Diseño y bobinado de las bobinas</h2>
    <ol>
      <li><strong>Fabricar el carrete</strong>: imprimir o mecanizar con pestañas que separen las tres secciones. Barnizar y curar a 60 °C durante 1 h.</li>
      <li><strong>Devanar la primaria</strong>: 600 espiras AWG 36 en 6 mm; velocidad ≈ 200 rpm. Impregnar con barniz epoxi al vacío.</li>
      <li><strong>Devanar las secundarias</strong>: usar dos hilos simultáneos (bifilar) para garantizar igualdad, 450 espiras cada una.</li>
      <li><strong>Etiquetar bornes</strong>: <code>P−</code>, <code>P+</code>, <code>S− (común)</code>, <code>S1</code>, <code>S2</code>.</li>
      <li><strong>Blindar</strong>: insertar el conjunto en tubo mu‑metal Ø 10 mm, conectado a masa.</li>
    </ol>
  </section>

  <!-- Montaje -->
  <section id="mecanico">
    <h2>4. Montaje mecánico</h2>
    <p>Deslizar el núcleo dentro de un tubo guía de PTFE (Ø 4,2 mm int.) fijado concéntricamente al carrete. Encapsular extremos con epoxi de baja contracción y sellar salida de cables (IP 54).</p>
  </section>

  <!-- Electrónica -->
  <section id="electronica">
    <h2>5. Electrónica de acondicionamiento</h2>
    <table>
      <thead>
        <tr><th>Bloque</th><th>Función</th><th>Componentes sugeridos</th></tr>
      </thead>
      <tbody>
        <tr><td>Oscilador&nbsp;5&nbsp;kHz</td><td>Excitación senoidal 3 VRMS</td><td>AD9833 + buffer, XR2206, Wien&nbsp;Bridge</td></tr>
        <tr><td>Excitador primario</td><td>Corriente 50‑100 mA</td><td>OPA548, LM675, etapa MOSFET clase‑AB</td></tr>
        <tr><td>Pre‑amplificador</td><td>G=20–50 dB, alta Z<sub>in</sub></td><td>INA118, AD8421</td></tr>
        <tr><td>Demodulación sync</td><td>Rectificación sincrónica</td><td>AD630 + filtro RC</td></tr>
        <tr><td>ADC/MCU</td><td>Digitalización 12–16 bit</td><td>ESP32‑C3, STM32G0</td></tr>
      </tbody>
    </table>

    <div class="note">
      <strong>Tip:</strong> El <em>PGA970</em> de Texas Instruments integra excitación LVDT, demodulación y ADC de 24 bit en un solo chip.
    </div>
  </section>

  <!-- VRMS Generation -->
  <section id="vrms">
    <h2>6. Cómo generar 5&nbsp;VRMS a 5&nbsp;kHz</h2>
    <h3>6.1 Arduino + PWM + Amplificador de Potencia</h3>
    <p>El Arduino produce una onda PWM de 31,25&nbsp;kHz modulada con una tabla de seno de 128 puntos; un filtro RC la suaviza y un op‑amp de potencia la amplifica.</p>

<pre><code class="language-cpp">/* Seno 5 kHz con Arduino UNO (Timer 1, PWM 10 bits) */
const uint8_t seno[128] = { /* 0‑255 table */ };
void setup() {
  pinMode(9, OUTPUT);
  TCCR1A = _BV(COM1A1) | _BV(WGM11);
  TCCR1B = _BV(WGM13) | _BV(WGM12) | _BV(CS10);
  ICR1 = 511; // 31,25 kHz PWM
}
void loop() {
  for (uint8_t i = 0; i &lt; 128; i++) {
    OCR1A = seno[i] * 2;      // 8‑bit → 10‑bit
    delayMicroseconds(1.6);    // ≈4,9 kHz
  }
}
</code></pre>

    <p><strong>Filtro RC:</strong> R=2,2&nbsp;kΩ en serie, C=4,7&nbsp;µF a masa &rarr; fc≈15&nbsp;Hz.<br>
       <strong>Amplificación:</strong> OPA548 no‑inversor con ganancia≈4,2 alimentado a ±12&nbsp;V.</p>

    <h3>6.2 Oscilador Wien Bridge + Buffer</h3>
    <ul>
      <li>R1=R2=3,2&nbsp;kΩ, C1=C2=10&nbsp;nF &rarr; f≈5&nbsp;kHz</li>
      <li>OPA2134 con lámpara incandescente #327 como estabilizador de ganancia.</li>
      <li>Buffer TIP41C/TIP42C push‑pull o LM675 en ganancia 1.</li>
    </ul>

    <h3>6.3 Generadores dedicados</h3>
    <ul>
      <li><strong>XR2206 / MAX038</strong>: simple RC para frecuencia; amplificar con etapa lineal.</li>
      <li><strong>AD9833</strong>: DDS controlado por MCU, filtro RC, amplificador de potencia.</li>
    </ul>
  </section>

  <!-- Calibración -->
  <section id="calibracion">
    <h2>7. Calibración</h2>
    <ol>
      <li><strong>Balanceo en nulo</strong>: con el núcleo centrado, ajustar offset del demodulador para V<sub>out</sub>=0.</li>
      <li><strong>Linealidad</strong>: desplazar el núcleo en pasos de 0,5 mm y graficar V<sub>out</sub>; R² &gt; 0,999.</li>
      <li><strong>Temperatura</strong>: ensayar de 10 °C a 40 °C; compensar en firmware (dV/dT).</li>
      <li><strong>Calibración absoluta</strong>: fijador micrométrico + calibre digital 0,01&nbsp;mm; almacenar pendiente y offset en EEPROM.</li>
    </ol>
  </section>

  <!-- Consejos -->
  <section id="consejos">
    <h2>8. Consejos prácticos</h2>
    <ul>
      <li><strong>Igualdad de secundarias</strong>: devanado bifilar o pesaje de bobinas para minimizar offset.</li>
      <li><strong>Ruido</strong>: pares trenzados y blindaje a tierra reducen captación de 50/60 Hz.</li>
      <li><strong>Protección</strong>: encapsular con silicona neutra si se instala a campo.</li>
      <li><strong>Demagnetización</strong>: aplicar seno decreciente 1&nbsp;kHz al núcleo antes de uso.</li>
    </ul>
  </section>

  <!-- Referencias -->
  <section id="referencias">
    <h2>9. Recursos de referencia</h2>
    <ol>
      <li>Tutorial OMEGA – fundamentos y frecuencias de excitación.</li>
      <li>Singer Instruments – estructura interna y blindaje.</li>
      <li>DIY Build Log – experiencia práctica con bobinas de 500‑700 espiras.</li>
      <li>Texas Instruments <em>PGA970</em> – solución integrada para LVDT.</li>
    </ol>
  </section>

  <footer>
    <p>Ing. Agr. José Czepulis</p>
  </footer>
</body>
</html>
